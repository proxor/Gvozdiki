<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
<meta content="text/html;charset=UTF-8" http-equiv="content-type"/>
    <script language="JavaScript" tytype="text/javascript" src="jquery-1.3.2.min.js"></script>
    <script language="JavaScript">
      <!--
$(document).ready(function(event){
	$("td.t").click(productClick);
});

var $productLine;

function productClick(event){
	$productLine = $(event.target.parentNode);
	loadExtended();
}

function showExtended(event){
	$(event.target.parentNode.nextSibling).css('display','');
	$(event.target).unbind('click', showExtended);
	$(event.target).click(hideExtended);
}

function hideExtended(event){
	$(event.target.parentNode.nextSibling).css('display','none');
	$(event.target).unbind('click', hideExtended);
	$(event.target).click(showExtended);
}

function loadExtended(){
	var id = 990;
	$.ajax({data:'',
		success:loadedSuccess, 
		type:'post', url:'http://localhost:3000/store/product_card/'+id+'/'}); 
}
function loadedSuccess(request){
	$('#data').html(request);
	$productExtendedLine = $("#data tr").clone();
	$productLine.replaceWith($productExtendedLine);
	$($productExtendedLine[0]).find("td.t").click(hideExtended);
}
      //-->
    </script>
    <style type="text/css">
      <!--
	div {border:1px dotted gray;}
	#price { 
		border:1px solid black;
		width:50em;	
	}
	#price .t { border-top: 1px solid gray; }
      -->
    </style>
  </head>
  <body>
	<table id="price">
		<TR>
			<TH>Code</TH>
			<TH>Name</TH>
			<TH>Price</TH>
		</TR>
		<TR>
			<TD>28733</TD>
			<TD class="t">Бордюр "Аллегро" на кор. кор. 249х80</TD>
			<TD>33.60 руб.</TD>
		</TR>
		<TR>
			<TD>4321</TD>
			<TD class="t">Cardholder</TD>
			<TD>250 RUR</TD>
		</TR>
	</table>
	
<div id="data" style="display:none;"></div>
  </body>
</html>